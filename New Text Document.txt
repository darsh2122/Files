import java.sql.*;
import java.util.*;

public class QueryExecutor {
    public List<Variable> searchByVariableValue(String variableValue) throws SQLException {
        List<Variable> variables = new ArrayList<>();

        // Establish database connection and create statement
        Connection connection = DriverManager.getConnection("jdbc:mysql://localhost:3306/mydatabase", "username", "password");
        Statement statement = connection.createStatement();

        // Execute query and process results
        ResultSet resultSet = statement.executeQuery("SELECT Variable_name, Variable_value FROM mytable WHERE Variable_value = '" + variableValue + "'");
        while (resultSet.next()) {
            String variableName = resultSet.getString("Variable_name");
            String variableValueResult = resultSet.getString("Variable_value");

            // Check if variable already exists in list
            Variable variable = null;
            for (Variable v : variables) {
                if (v.getName().equals(variableName)) {
                    variable = v;
                    break;
                }
            }

            // If variable does not exist, create new variable and add to list
            if (variable == null) {
                List<String> values = new ArrayList<>();
                values.add(variableValueResult);
                variable = new Variable(variableName, values);
                variables.add(variable);
            }
            // If variable already exists, add new value to its list of values
            else {
                variable.getValues().add(variableValueResult);
            }
        }

        // Close database connection, statement, and result set
        resultSet.close();
        statement.close();
        connection.close();

        // Return list of variables
        return variables;
    }
}
